{% extends "wp-root.html" %}
{% load applicationcontent_tags feincms_tags feincms_page_tags %}
{% load static %}

{% block "page-content" %}

    <div id="pagebody">
        <div id="bodyContent" class="wrapper">
            <div id="schedule" class="col-sm-9">
                {% feincms_render_region feincms_page "col1" request %}
            </div>

            <div id="sidebar" class="calendar col-sm-3">
                <div class="row">
                    <div class="col-sm-12 hidden-xs">
                        <h2>Local Time</h2>
                        <span id="localtime" title="Local time in Saskatoon"></span>
                    </div>
                    <div class="{% if feincms_page.content.col3 %}col-xs-4{% else %}hidden-xs{% endif %} col-sm-12">
                        {% feincms_render_region feincms_page "col3" request %}
                    </div>

                    <div class="col-xs-{% if feincms_page.content.col3 %}4{% else %}6{% endif %} col-sm-12">
                        <h2><span>Colour Legend</span></h2>
                        <table class="legend">
                            <tr><td class="N">Normal</td></tr>
                            <tr><td class="NS">Special Beam</td></tr>
                            <tr><td class="M">Maintenance</td></tr>
                            <tr><td class="D">Development</td></tr>
                            <tr><td class="DS">Special Development</td></tr>
                            <tr><td class="X">Shutdown</td></tr>
                            <tr><td>TBA</td></tr>
                        </table>
                    </div>
                    <div class="col-xs-{% if feincms_page.content.col3 %}4{% else %}6{% endif %} col-sm-12">
                        {% feincms_render_region feincms_page "col2" request %}
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block extra-header %}
    <script type="text/javascript" src="{% static 'js/jquery.min.js' %}" ></script>
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap-datepicker.js' %}"></script>

    <script>
        $(document).ready(function() {
            startTime();
        });

        function startTime() {
            var today=new Date();
            var h=today.getHours();
            var m=today.getMinutes();
            var s=today.getSeconds();
            var d=today.getDate();
            var mon=today.getMonth();
            var wkd=today.getDay();
            var y=today.getFullYear();
            var month=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"];
            var weekday=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
            m=checkTime(m);
            s=checkTime(s);
            wkd=weekday[wkd];
            mon=month[mon];
            document.getElementById("localtime").innerHTML=h+":"+m+"&nbsp;&nbsp;&nbsp;&nbsp;"+wkd+", "+mon+" "+d+", "+y;
            t=setTimeout(function(){startTime()},500);
        }
        function checkTime(i) {
            if (i<10) {
                i = "0"+i;
            }
            return i;
        }
    </script>
{% endblock %}
